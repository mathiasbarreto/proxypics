<h1>Orders</h1>
<%= render 'filter' %>
</br>
<table class="table">
  <thead>
    <tr>
      <th scope="col">ID</th>
      <th scope="col">Date of creation</th>
      <th scope="col">Address</th>
      <th scope="col">Status</th>
      <th scope="col"></th>
    </tr>
  </thead>
  <tbody>
    <% @orders.each do |order| %>
      <tr>
        <td><%= order.id %></td>
        <td><%= order.created_at.strftime("%m/%d/%Y") %></td>
        <td><%= order.address %></td>
        <td><%= order.status %></td>
        <% if order.status == 'pending' && assignee_signed_in? %>
          <td><%= link_to 'Submit Photos', edit_order_path(order) %> </td>
        <% end %>
        <td><%= link_to 'See Details', order%> </td>
        
      </tr>
    <% end %>
  </tbody>
</table>
</br>
<button type="button" class="btn btn-success  "><td><%= link_to 'New Order', new_order_path %> </td></button>
</br>
</br>
<%= paginate @orders %>


<div id='map' style='width: 400px; height: 300px;'></div>
<script>
  mapboxgl.accessToken = "<% ENV['MAPBOX_API_KEY'] %>";
  const map = new mapboxgl.Map({
      container: 'map', // container ID
      style: 'mapbox://styles/mapbox/streets-v11', // style URL
      center: [-74.5, 40], // starting position [lng, lat]
      zoom: 9, // starting zoom
      projection: 'globe' // display the map as a 3D globe
  });
  map.on('style.load', () => {
      map.setFog({}); // Set the default atmosphere style
});
</script>

